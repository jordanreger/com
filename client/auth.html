<script>
	window.onload = () => {
		const params = new URLSearchParams(window.location.hash.slice(1));
		const [accessToken, tokenType] = [params.get('access_token'), params.get('token_type')];

		if (!accessToken) {
			window.location.replace("/");
		}

		localStorage.setItem("token_type", tokenType);
		localStorage.setItem("access_token", accessToken);

		fetch('https://discord.com/api/users/@me', {
			headers: {
				authorization: `${tokenType} ${accessToken}`,
			},
		})
			.then(res => res.json())
			.then(res => {
        console.log(res);
        const user = `${res.username}#${res.discriminator}`;
        if(user === "jordanreger#7891") {
          window.location.replace("/app");
        }
			})
			.catch(() => {
        window.location.replace("/");
      });
	};
</script>